= TooYoung
ZeekoZhu <vaezt@outlook.com>

== 介绍

这个项目本来应该是我的个人图床，但是由于个人比较懒，所以之前一直都没能完成的很好。本来已经基本实现了图床的基本功能，但是毕业设计选了一个二维码分享文件的题目，所以就想着基于图床来改了。毕竟都是上传文件，然后通过链接下载文件。

在之前，这个项目是完全使用 C# 编写的，因为在开发期间受到了 《Functional Reactive Domain Driven Design》 这本书的影响，遂着手使用 F# 重构代码。不破不立，开重构的第一阶段，我基本上就废弃了原先的领域模型层 `TooYoung.Core`。所以，但是为了避免导致项目无法编译，就使用了新的名称空间 `TooYoung.Domain`。

新的领域层的开发大概花掉了我两个多周末的时间，在领域层的设计基本成型后，就开始动手重构仓储层了，因为已经将所有的业务逻辑都封装在了领域层，仓储层的代码显得非常无脑。最初的版本中，使用的 C# + MongoDB 来实现的仓储层，后来想过使用 PostgreSQL 替换 MongoDB，但是考虑到 GridFS 更加适合这个项目的，所以我就继续使用了 MongoDB。不过有领域层中的抽象都是使用 F# 的生态定义的，导致用 C# 来实现显得异常麻烦（本来 C# 代码就比较冗杂）。所以，一咬牙一跺脚，就用 F# 来实现了，果然，代码看起来简洁了许多😜。

== 2018年9月17日

使用 F# 重构了文件存储的仓储层

没有考虑到的功能：

- [ ] 超大文件的存储，由于目前使用的是 Byte 数组来表示的文件二进制，这使得文件的全部内容需要读入内存才能进行操作，对于超大文件来说，这是非常消耗资源的，此处需要改进，目前想法是使用 Stream 来实现文件二进制的表示。
